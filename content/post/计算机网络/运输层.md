---
title: "运输层"
description: 
date: 2022-04-17T09:21:31+08:00
lastmod: 2022-04-17T09:21:31+08:00
image: 
math: 
license: MIT
hidden: false
comments: true
draft: true
tags: 
categories: 
---
## 一、概述

运输层协议为运行在不同主机上的应用进程之间提供了 **逻辑通信（`logic communication`）** 功能。

通过逻辑通信，运行不同进程的主机好像直接相连一样。应用进程使用运输层提供的逻辑通信功能彼此发送报文，而无须考虑承载这些报文的物理基础设施的细节。

### 端口号

端口号是一个16比特的数，其大小在 0 ~ 65535 之间。
0 ~ 1023 范围的端口号称为 **周知端口号（`well-known port number`）** ，是受限制的，这些端口号一般保留给 HTTP 和 FTP 之类的周知应用层协议。

### 多路复用和多路分解

在源主机从不同套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，所有这些工作称为 **多路复用（`multiplexing`）** 。

将运输层报文段中的数据交付到正确的套接字的工作称为 **多路分解（`demultiplexing`）** 。

#### 多路复用的实现

运输层多路复用的要求和实现对应是：

1. 套接字有唯一标识符 -- **源端口号字段（`source port number field`）**

2. 每个报文段有特殊字段来指示该报文段所要交付的字段 -- **目的端口号字段（`destination port number field`）**

#### 多路分解的实现

在主机上的每个套接字能够分配一个端口号，当报文段到达主机时，运输层检查报文段中的目的端口号，并将其定向到相应的套接字。然后报文段中的数据通过套接字进入所连接的进程。

