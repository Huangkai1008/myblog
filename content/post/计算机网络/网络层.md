---
title: "网络层"
description: 
date: 2020-10-17T21:07:31+08:00
lastmod: 2020-10-21T19:40:31+08:00
image: "https://blog-1259169620.cos.ap-guangzhou.myqcloud.com/img/Internet_Protocol_Analysis_-_Transport_Layer.png"
math: 
license: MIT
hidden: false
comments: true
draft: false
tags: ["计算机网络", "网络层"]
categories: ["计算机网络"]
---

# 网络层

## 一、概述

在网络中的每一台主机和路由器都有一个网络层部分。网络层可以被分解为两个相互作用的部分，即 **数据平面（`data plane`）** 和 **控制平面(`control plane`)** 。

### 转发和路由选择

网络层的作用从表面上来看极为简单，即**将分组从发送主机移动到接收主机。** 为此，需要使用两种重要的网络层功能：**转发（`forwarding`）** 和 **路由选择(`routing`)** 。

#### 转发

> **转发** 是指将分组从一个输入链路接口转移到适当的输出链路接口的路由器本地动作。转发是数据平面实现的唯一功能，通常由硬件来实现。

#### 路由选择

> **路由选择** 是指确定分组从源到目的地所采取的端到端路径的网络范围处理过程。计算这些路径的算法被称为 **路由选择算法（`routing algorithm`）** 。此功能在控制平面由软件实现。

### 网络服务模型

> **网络服务模型（`network service model`）** 定义了分组在发送与接收端系统之间的端到端运输特性。

因特网的网络层提供了单一的服务，称为 **尽力而为服务（`best-effort service`）** 。
高情商说法： “尽力而为”， 低情商说法： “根本无服务”。

## 二、路由器的工作原理

路由器有4个组件：

1. **输入端口（`Input port`）** ：
   * 执行查找功能；
   * 执行终结入物理链路的物理层功能；
   * 与位于入链路远端的数据链路层交互来执行数据链路层功能

2. **交换结构(`Switching fabric`)** 将输入端口连接到输出端口，是网络路由器的网络。

3. **输出端口（`Output port`）** 存储从交换结构接收的分组，并通过执行链路层和物理层功能将分组在输出链路上传输。当链路是双向时，输入端口和输出端口将成对出现。

4. **路由选择处理器（`Routing processor`）** 执行控制平面功能。
   * 在传统路由器中，执行路由选择协议，维护路由选择表与关联链路状态信息，并计算转发表；
   * 在 SDN 路由器中，负责与远程控制器通信，接收远程控制器计算的转发表，并安装在输入端口。

输入端口、输出端口和交换结构由硬件实现，控制平面由软件在路由选择器上执行。



