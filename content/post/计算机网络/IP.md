---
title: "IP"
date: 2020-06-18T12:22:57+08:00
lastmod: 2020-06-18T12:22:57+08:00
description: ""
draft: false
tags: ["计算机网络"]
categories: ["计算机网络"]
---
# IP

## IP地址概述

> **IP 地址(`Internet Protocol address`)**是用于识别 IP 网络中的设备的一个唯一地址，32 个二进制位分成了 4 个八位组（1 个八位组 = 8 个二进制位）。
>
> 每个八位组转换成了十进制并由句点（点）分隔。 因此，可以说 IP 地址是用点分十进制格式表示的（例如，172.16.81.100）。 每个八位组值的范围从 0 到 255（十进制）或从 00000000 到 11111111（二进制）。

```bash
      10.       1.      23.      19 (decimal)
00001010.00000001.00010111.00010011 (binary)
```

-----------------
## IP 地址编址方式

IP 地址的编址方式经历了三个历史阶段：

-   **分类**
-   **子网划分**
-   **无分类**

### 1. 分类
-------
IP地址由两部分组成，**网络号**和**主机号**，其中不同分类具有不同的网络号长度，并且是固定的

> **网络号**(`net-id`)：标志主机或路由器连接的网络，一个网络号在整个因特网内是唯一的

> **主机号**(`host-id`)：标志该主机（或路由器）。一个主机号在它前面的网络号所指明的网络范围内必须是唯一的

简而言之，**IP 地址 ::= {< 网络号 >, < 主机号 >}**

根据 IP 地址的范围，由此便划分出A、B、C三类及特殊地址D、E：

| 类别 | 起始位 |   开始    |     结束      | 点分十进制掩码 |
| :--: | :----: | :-------: | :-----------: | :------------: |
|  A   |   0    |  0.0.0.0  |   127.0.0.0   |   255.0.0.0    |
|  B   |   10   | 128.0.0.0 |  191.255.0.0  |  255.255.0.0   |
|  C   |  110   | 192.0.0.0 | 223.255.255.0 | 255.255.255.0  |

[^注]: 由于近年来已经广泛使用 **无类别域间路由（Classless Inter-Domain Routing、CIDR）** 进行路由选择，A类、B类和C类地址的区分已成为历史[RFC 1812]

### 2. 子网划分

-------
#### 子网掩码

> 子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩，它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。

通常情况下，子网掩码的表示方法和地址本身的表示方法是一样的。在IPv4中，就是点分十进制四组表示法（四个取值从0到255的数字由点隔开，比如255.128.0.0）或表示为一个八位十六进制数（如FF.80.00.00，它等同于255.128.0.0），后者用得较少。

另一种更为简短的形式叫做[无类别域间路由](https://zh.wikipedia.org/wiki/无类别域间路由)（CIDR）表示法，它给出的是一个地址加上一个斜杠以及网络掩码的二进制表示法中“1”的位数（即网络号中和网络掩码相关的是哪些位）。例如，192.0.2.96/28表示的是一个前28位被用作网络号的IP地址（和255.255.255.240的意思一样）。

**子网掩码是由32位二进制数字组成的四组数字，左边是网络位，用二进制数字1表示，1的个数等于网络位数的长度，右边是主机位，用二进制数字0表示，0的个数等于主机位的长度。**

当给定一个IP地址后，我们**通过相应的子网掩码即可得出该地址所在网络的网络号位数，以此判断该网络能够容纳的机器的个数（即主机号位数）**。另外的一个作用就是可以通过运算判断两台机器是否处在同一子网。

**特点**

* 与IP地址一一对应
* 1和0永远是连续的，不会交叉出现
* 左边永远是1，右边永远是0

#### 2.1  判断该网络能够容纳的机器的个数

​      主机号有N位，那么这个地址中，就只能有`2 ** n − 2`个主机，因为其中全0作为网络地址，全1作为广播地址

##### 2.2  判断两台机器是否处在同一子网（网段）

​  将IP地址与子网掩码做`与运算`，如果得出的结果一样，则这两个IP地址是同一个子网当中

#### 3.广播地址(`Broadcast address`)

> 广播地址是专门用于同时向该网络中所有主机进行广播的一个地址。这就好像我们去收听一个广播频道，广播频道本身就是一个广播地址，播音员向这个地址去进行推送，那么只要能够收到这个频道的听众就都能够听到广播。那么这个广播的覆盖面到底有多广呢，这还是取决于我们的网络号。我们知道，一个完整的IP地址是由网络号和主机号两部分组成的，那么广播的覆盖范围就是其所在网络下的所有主机。

只要把主机号所在的二进制位全部变为1即可得到广播地址。

* 局域网地址：192.168.211.32/24（斜杠后的数字代表子网掩码的二进制位数，那么主机号的位数为32-24=8），所以广播地址为：192.168.211.255
